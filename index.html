`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English 102 Interactive Quiz</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: radial-gradient(1200px 600px at 10% 10%, rgba(56,189,248,0.08), transparent), radial-gradient(800px 400px at 90% 20%, rgba(124,58,237,0.10), transparent), linear-gradient(135deg, #0b1020 0%, #0a0f1a 100%); min-height: 100vh; padding: 20px; display: flex; justify-content: center; align-items: center; color: #e5e7eb; }
        .container { max-width: 900px; width: 100%; background: #0f172a; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.65), inset 0 0 0 1px rgba(148,163,184,0.08); overflow: hidden; }
        .header { background: linear-gradient(135deg, #0ea5e9 0%, #8b5cf6 100%); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 28px; margin-bottom: 10px; }
        .header p { opacity: 0.95; font-size: 16px; }
        .unit-selector { background: #0b1324; padding: 24px 32px; border-bottom: 1px solid rgba(148,163,184,0.12); display: flex; gap: 16px; justify-content: center; }
        .unit-btn { padding: 12px 28px; border: 1px solid rgba(148,163,184,0.22); background: #0f172a; color: #e5e7eb; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 18px; transition: all 0.25s; letter-spacing: 0.3px; }
        .unit-btn.active, .unit-btn:hover { background: linear-gradient(135deg, rgba(14,165,233,0.18), rgba(139,92,246,0.18)); color: #f8fafc; border-color: rgba(139,92,246,0.55); transform: translateY(-2px); box-shadow: 0 8px 24px rgba(14,165,233,0.18); }
        .quiz-info { background: #0b1324; padding: 14px 32px; display: flex; justify-content: space-around; border-bottom: 1px solid rgba(148,163,184,0.12); }
        .quiz-info-item { font-size: 14px; color: #cbd5e1; }
        .quiz-info-item strong { color: #f1f5f9; }
        .quiz-container { padding: 36px 32px; min-height: 480px; }
        .question-card { display: none; animation: fadeIn 0.5s; }
        .question-card.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .question-number { color: #22d3ee; font-weight: bold; font-size: 14px; margin-bottom: 15px; }
        .question-text { font-size: 20px; color: #e5e7eb; margin-bottom: 25px; line-height: 1.7; }
        .question-type { display: inline-block; background: rgba(14,165,233,0.14); color: #67e8f9; padding: 6px 12px; border-radius: 999px; font-size: 12px; margin-bottom: 15px; border: 1px solid rgba(103,232,249,0.25); }
        .options { display: flex; flex-direction: column; gap: 12px; }
        .option-label { background: #111827; border: 1px solid #334155; padding: 15px 20px; border-radius: 12px; cursor: pointer; transition: all 0.25s; font-size: 16px; display: flex; align-items: center; gap: 12px; color: #e5e7eb; }
        .option-label:hover { background: #0f1b32; border-color: #22d3ee; transform: translateX(5px); box-shadow: 0 10px 24px rgba(34,211,238,0.10); }
        .option-label input[type="radio"] { width: 20px; height: 20px; cursor: pointer; accent-color: #22d3ee; }
        .option-label.selected { background: linear-gradient(135deg, rgba(34,211,238,0.18), rgba(139,92,246,0.18)); color: #f8fafc; border-color: rgba(139,92,246,0.55); }
        .option-label.correct { background: rgba(34,197,94,0.25); color: #dcfce7; border-color: rgba(34,197,94,0.6); }
        .option-label.incorrect { background: rgba(244,63,94,0.25); color: #ffe4e6; border-color: rgba(244,63,94,0.6); }
        .option-label.disabled { pointer-events: none; }
        .feedback { margin-top: 20px; padding: 15px; border-radius: 12px; display: none; }
        .feedback.show { display: block; animation: fadeIn 0.5s; }
        .feedback.correct { background: rgba(22,163,74,0.18); color: #a7f3d0; border-left: 4px solid #22c55e; }
        .feedback.incorrect { background: rgba(225,29,72,0.18); color: #fecdd3; border-left: 4px solid #f43f5e; }
        .navigation { display: flex; justify-content: space-between; margin-top: 30px; gap: 15px; flex-wrap: wrap; }
        .btn { padding: 12px 30px; border: none; border-radius: 12px; font-size: 16px; cursor: pointer; transition: all 0.25s; font-weight: 700; letter-spacing: 0.3px; }
        .btn-primary { background: linear-gradient(135deg, #0ea5e9, #8b5cf6); color: white; }
        .btn-primary:hover { filter: brightness(1.08); transform: translateY(-2px); box-shadow: 0 8px 24px rgba(139,92,246,0.35); }
        .btn-secondary { background: #1f2937; color: #cbd5e1; }
        .btn-secondary:hover { background: #263245; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .results { display: none; text-align: center; padding: 40px 30px; }
        .results.show { display: block; animation: fadeIn 0.5s; }
        .score-circle { width: 200px; height: 200px; border-radius: 50%; background: radial-gradient(80px 80px at 30% 30%, rgba(255,255,255,0.15), transparent), linear-gradient(135deg, #0ea5e9 0%, #8b5cf6 100%); color: white; display: flex; flex-direction: column; justify-content: center; align-items: center; margin: 30px auto; box-shadow: 0 10px 30px rgba(14,165,233,0.2); border: 2px solid rgba(255,255,255,0.15); }
        .score-circle .score { font-size: 48px; font-weight: bold; }
        .score-circle .total { font-size: 18px; opacity: 0.95; }
        .results h2 { color: #f8fafc; margin-bottom: 20px; font-size: 32px; }
        .results p { color: #cbd5e1; font-size: 18px; margin-bottom: 30px; }
        .progress-bar { width: 100%; height: 8px; background: #1f2937; border-radius: 10px; overflow: hidden; margin-bottom: 10px; box-shadow: inset 0 0 0 1px rgba(148,163,184,0.12); }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #22d3ee 0%, #8b5cf6 100%); transition: width 0.3s; }
        .footer-credit { text-align: center; color: #94a3b8; padding: 16px 24px; border-top: 1px solid rgba(148,163,184,0.12); font-size: 14px; background: #0b1324; }
        .unit-btn:focus-visible, .btn:focus-visible, .option-label:focus-within { outline: 2px solid #22d3ee; outline-offset: 3px; }
    </style>
</head>
<body>
    <div class="container">
        <header class="header" role="banner">
            <h1>üìö English 102 Interactive Quiz</h1>
            <p>Select a unit to start - All questions are multiple choice</p>
        </header>
        <nav class="unit-selector" aria-label="Unit selector">
            <button class="unit-btn" onclick="selectUnit(1, this)" aria-pressed="false">Unit 1</button>
            <button class="unit-btn" onclick="selectUnit(2, this)" aria-pressed="false">Unit 2</button>
            <button class="unit-btn" onclick="selectUnit(3, this)" aria-pressed="false">Unit 3</button>
        </nav>
        <section class="quiz-info" style="display:none" id="info-bar" role="status" aria-live="polite" aria-atomic="true">
            <div class="quiz-info-item"><strong>Questions:</strong> <span id="total-questions">0</span></div>
            <div class="quiz-info-item"><strong>Current:</strong> <span id="current-question">1</span></div>
            <div class="quiz-info-item"><strong>Score:</strong> <span id="current-score">0</span></div>
            <div class="quiz-info-item"><strong>Percentage:</strong> <span id="percentage">0%</span></div>
        </section>
        <main class="quiz-container" role="main">
            <div class="progress-bar" id="progressbar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Quiz progress"><div class="progress-fill" id="progress-fill"></div></div>
            <div id="quiz-questions"></div>
            <div class="navigation">
                <button class="btn btn-secondary" id="prev-btn" onclick="previousQuestion()">‚Üê Previous</button>
                <button class="btn btn-primary" id="check-btn" onclick="checkAnswer()">Check Answer</button>
                <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()" style="display:none;">Next ‚Üí</button>
                <button class="btn btn-primary" id="finish-btn" onclick="finishQuiz()" style="display:none;">Finish Quiz</button>
            </div>
        </main>
        <section class="results" id="results" role="region" aria-labelledby="results-title">
            <h2 id="results-title">üéâ Quiz Complete!</h2>
            <div class="score-circle"><div class="score" id="final-score">0</div><div class="total">out of <span id="final-total">0</span></div></div>
            <p id="result-message"></p>
            <button class="btn btn-primary" onclick="restartQuiz()">Try Again</button>
        </section>
        <footer class="footer-credit">ÿ™ÿ∑ŸàŸäÿ± ÿßŸÑŸÖÿ®ÿ±ŸÖÿ¨ Ahmad AL-Batayneh</footer>
    </div>
    <script>
        const allUnits = {"1": [{"q": "The opposite of 'coincidence' is:", "opts": ["plan", "indetermination", "share"], "ans": 0, "type": "mc"}, {"q": "The opposite of 'occupy' is:", "opts": ["lose", "unengaged", "hinder"], "ans": 0, "type": "mc"}, {"q": "The opposite of 'disbelief' is:", "opts": ["believe", "belief", "determine"], "ans": 1, "type": "mc"}, {"q": "The opposite of 'demonstrate' is:", "opts": ["disprove", "assist", "enroll"], "ans": 0, "type": "mc"}, {"q": "The opposite of 'massive' is:", "opts": ["tiny", "retrieve", "compete"], "ans": 0, "type": "mc"}, {"q": "The opposite of 'retrieve' is:", "opts": ["lose", "occupy", "share"], "ans": 0, "type": "mc"}, {"q": "The opposite of 'assist' is:", "opts": ["hinder", "compete", "enroll"], "ans": 0, "type": "mc"}, {"q": "The opposite of 'compete' is:", "opts": ["share", "assist", "enroll"], "ans": 0, "type": "mc"}, {"q": "The opposite of 'enroll' is:", "opts": ["quit", "lose", "hinder"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'ostratedemn': to show or prove something", "opts": ["demonstrate", "demonstrait", "demonstrote"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'moreoophs': a student in the second year of university", "opts": ["sophomore", "sophmore", "sofomor"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'orttu': a person who teaches one person or small group", "opts": ["tutor", "totur", "tuter"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'visorpusre': a person who is in charge of someone", "opts": ["supervisor", "superviser", "supervisar"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'isthes': long written essay submitted for university degree", "opts": ["thesis", "theseis", "thises"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'tationssdire': thesis", "opts": ["dissertation", "disertation", "dissertetion"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'uledom': a part of a course of learning", "opts": ["module", "modul", "modual"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'baclorhe': a person who has earned a four year degree", "opts": ["bachelor", "batchelor", "bachlor"], "ans": 0, "type": "mc"}, {"q": "I am attending _____ on Greek philosophy.", "opts": ["lectures", "strategy", "determination"], "ans": 0, "type": "mc"}, {"q": "The election _____ democracy in action.", "opts": ["demonstrates", "highlights", "interacts"], "ans": 0, "type": "mc"}, {"q": "The government is trying to find a new economic _____ to improve the situation.", "opts": ["strategy", "determination", "imperative"], "ans": 0, "type": "mc"}, {"q": "It is _____ that we make a quick decision.", "opts": ["immensely", "imperative", "supervisor"], "ans": 1, "type": "mc"}, {"q": "A _____ is a person who checks on others' work to make sure it is done properly.", "opts": ["supervisor", "lecturer", "tutor"], "ans": 0, "type": "mc"}, {"q": "It is interesting to watch people _____ with each other at parties.", "opts": ["strategy", "interact", "determine"], "ans": 1, "type": "mc"}, {"q": "Her _____ to learn English is amazing.", "opts": ["determination", "disbelief", "strategy"], "ans": 0, "type": "mc"}, {"q": "This TV program _____ the problems of the unemployed.", "opts": ["demonstrates", "highlights", "interacts"], "ans": 1, "type": "mc"}, {"q": "He listened in _____ to his son's story.", "opts": ["disbelief", "determination", "strategy"], "ans": 0, "type": "mc"}, {"q": "They enjoyed the film _____.", "opts": ["immensely", "imperative", "supervisor"], "ans": 0, "type": "mc"}, {"q": "Profits have risen _____.", "opts": ["phonologically", "genetically", "significantly"], "ans": 2, "type": "mc"}, {"q": "A _____ is a student in his/her first year in university.", "opts": ["senior", "sophomore", "freshman"], "ans": 2, "type": "mc"}, {"q": "She has the perfect _____ for this job.", "opts": ["coincidence", "credentials", "module"], "ans": 1, "type": "mc"}, {"q": "A student in his/her third year of a four-year course is called a _____.", "opts": ["junior", "senior", "freshman"], "ans": 0, "type": "mc"}, {"q": "A student in his/her last year at college is called a _____.", "opts": ["junior", "senior", "sophomore"], "ans": 1, "type": "mc"}, {"q": "My parents _____ in Irbid.", "opts": ["lives", "live", "are living"], "ans": 1, "type": "mc"}, {"q": "The weather is cold. I think it _____", "opts": ["rain", "rains", "is raining"], "ans": 1, "type": "mc"}, {"q": "Hurry up! Everyone _____ for you.", "opts": ["is waiting", "are waiting", "waits"], "ans": 0, "type": "mc"}, {"q": "I _____ really happy to see you.", "opts": ["am", "is", "are"], "ans": 0, "type": "mc"}, {"q": "She usually _____ for two hours on daily basis.", "opts": ["studeis", "studys", "studies"], "ans": 2, "type": "mc"}, {"q": "They _____ to the library very often.", "opts": ["go", "goes", "are going"], "ans": 0, "type": "mc"}, {"q": "I've lost my key again. Oh, I _____ it.", "opts": ["always lose", "am always losing", "always loses"], "ans": 1, "type": "mc"}, {"q": "You _____ television. You should do something more active.", "opts": ["are always watching", "always watch", "always watches"], "ans": 0, "type": "mc"}, {"q": "George is never satisfied. He _____.", "opts": ["is always complaining", "are complaining", "always complains"], "ans": 0, "type": "mc"}, {"q": "Education _____ the key to knowledge.", "opts": ["are", "be", "is"], "ans": 2, "type": "mc"}, {"q": "I _____ of selling my car. What do you think?", "opts": ["think", "thinks", "am thinking"], "ans": 2, "type": "mc"}, {"q": "I don't understand why he _____ so selfish today.", "opts": ["is being", "is be", "is"], "ans": 0, "type": "mc"}], "2": [{"q": "The synonym of 'utilize' is:", "opts": ["understand", "suppress", "use"], "ans": 2, "type": "mc"}, {"q": "The synonym of 'quash' is:", "opts": ["break", "suppress", "understand"], "ans": 1, "type": "mc"}, {"q": "The synonym of 'twist' is:", "opts": ["revolve", "break", "suppress"], "ans": 0, "type": "mc"}, {"q": "The synonym of 'inherit' is:", "opts": ["understand", "receive", "suppress"], "ans": 1, "type": "mc"}, {"q": "The synonym of 'stockpile' is:", "opts": ["break", "store", "suppress"], "ans": 1, "type": "mc"}, {"q": "Unscramble 'ingavcr': strong desire", "opts": ["craving", "craeving", "cravng"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'ialned': refusal to accept reality", "opts": ["denial", "denail", "denyal"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'inav': having no value or significance", "opts": ["vain", "vane", "vein"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'icfdeit': amount by which something is too small", "opts": ["deficit", "defisit", "defecit"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'seauna': feeling of sickness or disgust", "opts": ["nausea", "nauseia", "nausia"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'nnishav': disappear completely and suddenly", "opts": ["vanish", "vannish", "venish"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'allegnehc': test the ability of somebody", "opts": ["challenge", "challange", "chalenge"], "ans": 0, "type": "mc"}, {"q": "Unscramble 'dealp': make repeated urgent requests", "opts": ["plead", "pleed", "plaid"], "ans": 0, "type": "mc"}, {"q": "Everyone began shouting and the meeting ended due to the _____.", "opts": ["chaos", "disorder", "confusion"], "ans": 0, "type": "mc"}, {"q": "If you are obese, you have an increased risk of developing _____.", "opts": ["disorder", "diabetes", "anxiety"], "ans": 1, "type": "mc"}, {"q": "Having high _____ helps you accomplish your goals in life.", "opts": ["self-esteem", "humiliation", "denial"], "ans": 0, "type": "mc"}, {"q": "Frequent anxiety can be a _____ of social phobia.", "opts": ["symptom", "disorder", "anxiety"], "ans": 0, "type": "mc"}, {"q": "_____ on by his colleagues, he applied for the position.", "opts": ["Urged", "Humiliated", "Denied"], "ans": 0, "type": "mc"}, {"q": "A good education should _____ you for life.", "opts": ["humiliate", "equip", "deny"], "ans": 1, "type": "mc"}, {"q": "She suffered public _____ when she forgot the words to her speech.", "opts": ["disorder", "humiliation", "anxiety"], "ans": 1, "type": "mc"}, {"q": "It is easier to lose weight if you have fast _____.", "opts": ["metabolism", "humiliation", "disorder"], "ans": 0, "type": "mc"}, {"q": "She believed she had _____, but she didn't know how to make the most of it.", "opts": ["potential", "humiliation", "disorder"], "ans": 0, "type": "mc"}, {"q": "She visited many _____, but she still couldn't stop eating junk food.", "opts": ["nutritionists", "symptoms", "anxieties"], "ans": 0, "type": "mc"}, {"q": "A _____ diagnosed her son with autism.", "opts": ["pediatrician", "symptom", "disorder"], "ans": 0, "type": "mc"}, {"q": "One of his less attractive _____ is criticizing his family in public.", "opts": ["traits", "passion", "potential"], "ans": 0, "type": "mc"}, {"q": "Everyone should _____ what he or she can afford.", "opts": ["perceive", "escalate", "contribute"], "ans": 2, "type": "mc"}, {"q": "He _____ with his parents for a more understanding attitude.", "opts": ["eliminated", "pleaded", "excelled"], "ans": 1, "type": "mc"}, {"q": "I was _____ for a nice refreshing drink.", "opts": ["craving", "sustaining", "twisting"], "ans": 0, "type": "mc"}, {"q": "I eat normally in front of people, but I _____ when I'm alone.", "opts": ["quash", "gorge", "equip"], "ans": 1, "type": "mc"}, {"q": "I _____ books on nutrition last week.", "opts": ["was buying", "bought", "buy"], "ans": 1, "type": "mc"}, {"q": "There _____ a shortage of food after the war.", "opts": ["was", "were", "is"], "ans": 0, "type": "mc"}, {"q": "She _____ uncontrollably when I came in.", "opts": ["ate", "was eating", "eats"], "ans": 1, "type": "mc"}, {"q": "She _____ her way of dealing as soon as she realized.", "opts": ["changed", "was changing", "changes"], "ans": 0, "type": "mc"}, {"q": "She _____ on food when her mother came in.", "opts": ["gorged", "was gorging", "gorges"], "ans": 1, "type": "mc"}], "3": [{"q": "The synonym of 'effective' is:", "opts": ["ineffective", "ineffectual", "effectual"], "ans": 2, "type": "mc"}, {"q": "The synonym of 'unmotivated' is:", "opts": ["motivated", "lazy", "determined"], "ans": 1, "type": "mc"}, {"q": "The synonym of 'devious' is:", "opts": ["honest", "sneaky", "direct"], "ans": 1, "type": "mc"}, {"q": "The synonym of 'drained' is:", "opts": ["energized", "exhausted", "happy"], "ans": 1, "type": "mc"}, {"q": "The synonym of 'enhance' is:", "opts": ["decrease", "improve", "worsen"], "ans": 1, "type": "mc"}, {"q": "The company was worried about lack of money and its effect on _____.", "opts": ["budget", "protocol", "strategy"], "ans": 0, "type": "mc"}, {"q": "The organizer was familiar with the _____ of royal visits.", "opts": ["budget", "protocol", "competence"], "ans": 1, "type": "mc"}, {"q": "I don't usually like films with bad plots and _____ characters.", "opts": ["stereotype", "competence", "assumptions"], "ans": 0, "type": "mc"}, {"q": "No one doubts her _____ as a teacher.", "opts": ["competence", "assumptions", "protocol"], "ans": 0, "type": "mc"}, {"q": "The theory is based on a series of wrong _____.", "opts": ["assumptions", "competence", "protocol"], "ans": 0, "type": "mc"}, {"q": "Tom was _____ so he couldn't pay his debts.", "opts": ["bankrupt", "cautious", "regret"], "ans": 0, "type": "mc"}, {"q": "Most parents teach their children to be _____ around strangers.", "opts": ["cautious", "bankrupt", "grin"], "ans": 0, "type": "mc"}, {"q": "I _____ to say the position has been already filled.", "opts": ["grin", "regret", "annoyed"], "ans": 1, "type": "mc"}, {"q": "He accepted my resignation with a nasty _____ on his face.", "opts": ["grin", "annoyance", "regret"], "ans": 0, "type": "mc"}, {"q": "Lack of parking near the office is the only _____ I have to deal with.", "opts": ["budget", "annoyances", "competence"], "ans": 1, "type": "mc"}, {"q": "That silly law is no longer _____.", "opts": ["drained", "effective", "interpersonal"], "ans": 1, "type": "mc"}, {"q": "_____ is the practice of favoring one's own relatives in giving them jobs.", "opts": ["Annoyance", "Qualification", "Nepotism"], "ans": 2, "type": "mc"}, {"q": "She found it difficult to establish a new _____ after retirement.", "opts": ["prescription", "routine", "attribute"], "ans": 1, "type": "mc"}, {"q": "He was _____ when he realized his work was shredded into pieces.", "opts": ["enraged", "cautious", "unmotivated"], "ans": 0, "type": "mc"}, {"q": "Some people _____ going to work when they don't enjoy what they're doing.", "opts": ["enhance", "dread", "oblige"], "ans": 1, "type": "mc"}, {"q": "Tom _____ his presentation before he went to the office.", "opts": ["prepared", "had prepared", "has prepared"], "ans": 1, "type": "mc"}, {"q": "She _____ lunch after she _____ the house.", "opts": ["prepared / had cleaned", "have prepared / had cleaned", "prepares / had cleaned"], "ans": 0, "type": "mc"}, {"q": "She _____ already _____ the assignment.", "opts": ["has / submit", "has / submitted", "have / submitted"], "ans": 1, "type": "mc"}, {"q": "_____ they ever _____ Japan?", "opts": ["Has / visited", "Had / been visiting", "Have / visited"], "ans": 2, "type": "mc"}, {"q": "She _____ her resignation before her boss fired her.", "opts": ["had written", "had been writing", "has written"], "ans": 0, "type": "mc"}, {"q": "He _____ three letters so far.", "opts": ["has written", "has been writing", "wrote"], "ans": 0, "type": "mc"}, {"q": "My partner _____ his assignment recently.", "opts": ["has finished", "has been finishing", "finished"], "ans": 0, "type": "mc"}, {"q": "My neighbors _____ stayed in the same apartment for five years.", "opts": ["stayed", "have stayed", "stay"], "ans": 1, "type": "mc"}, {"q": "I _____ the text carefully before I _____ the questions.", "opts": ["have read / answered", "had read / answered", "has read / have answered"], "ans": 0, "type": "mc"}]};
        let quizData = []; let currentUnit = 0; let currentQuestion = 0; let score = 0; let answered = false;
        function selectUnit(unitNum, btnEl) {
            document.querySelectorAll('.unit-btn').forEach(btn => { btn.classList.remove('active'); btn.setAttribute('aria-pressed','false'); });
            if (btnEl) { btnEl.classList.add('active'); btnEl.setAttribute('aria-pressed','true'); }
            quizData = allUnits[unitNum.toString()]; currentUnit = unitNum; currentQuestion = 0; score = 0; answered = false;
            document.getElementById('info-bar').style.display = 'flex';
            document.getElementById('results').classList.remove('show');
            document.querySelector('.quiz-container').style.display = 'block';
            document.getElementById('check-btn').style.display = 'block';
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('finish-btn').style.display = 'none';
            initQuiz(); updateScore();
        }
        function initQuiz() {
            const container = document.getElementById('quiz-questions'); container.innerHTML = '';
            quizData.forEach((q, index) => {
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                if (index === 0) questionCard.classList.add('active');
                questionCard.id = `question-${index}`;
                const optionsHTML = q.opts.map((opt, i) => `<label class="option-label" data-index="${i}"><input type="radio" name="q${index}" value="${i}"><span>${opt}</span></label>`).join('');
                questionCard.innerHTML = `<div class="question-type">Multiple Choice</div><div class="question-number">Question ${index + 1} of ${quizData.length}</div><div class="question-text">${q.q}</div><div class="options">${optionsHTML}</div><div class="feedback" id="feedback-${index}"></div>`;
                container.appendChild(questionCard);
                questionCard.querySelectorAll('.option-label').forEach(label => {
                    label.addEventListener('click', function() {
                        if (!answered) {
                            questionCard.querySelectorAll('.option-label').forEach(l => l.classList.remove('selected'));
                            this.classList.add('selected'); this.querySelector('input').checked = true;
                        }
                    });
                });
            });
            document.getElementById('total-questions').textContent = quizData.length; updateProgress();
        }
        function checkAnswer() {
            if (answered) return;
            const currentQ = quizData[currentQuestion];
            const selectedRadio = document.querySelector(`#question-${currentQuestion} input[type="radio"]:checked`);
            if (!selectedRadio) { alert('Please select an answer!'); return; }
            const selectedIndex = parseInt(selectedRadio.value);
            const labels = document.querySelectorAll(`#question-${currentQuestion} .option-label`);
            const feedback = document.getElementById(`feedback-${currentQuestion}`);
            labels.forEach(label => label.classList.add('disabled'));
            if (selectedIndex === currentQ.ans) {
                labels[selectedIndex].classList.add('correct');
                feedback.className = 'feedback correct show'; feedback.textContent = '‚úì Correct! Well done!'; score++;
            } else {
                labels[selectedIndex].classList.add('incorrect'); labels[currentQ.ans].classList.add('correct');
                feedback.className = 'feedback incorrect show'; feedback.textContent = `‚úó Incorrect. The correct answer is: ${currentQ.opts[currentQ.ans]}`;
            }
            answered = true; document.getElementById('check-btn').style.display = 'none';
            if (currentQuestion < quizData.length - 1) { document.getElementById('next-btn').style.display = 'block'; }
            else { document.getElementById('finish-btn').style.display = 'block'; }
            updateScore();
        }
        function nextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                document.getElementById(`question-${currentQuestion}`).classList.remove('active');
                currentQuestion++; document.getElementById(`question-${currentQuestion}`).classList.add('active');
                answered = false; document.getElementById('check-btn').style.display = 'block';
                document.getElementById('next-btn').style.display = 'none'; updateProgress();
            }
        }
        function previousQuestion() {
            if (currentQuestion > 0) {
                document.getElementById(`question-${currentQuestion}`).classList.remove('active');
                currentQuestion--; document.getElementById(`question-${currentQuestion}`).classList.add('active'); updateProgress();
            }
        }
        function updateProgress() {
            const progress = ((currentQuestion + 1) / quizData.length) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            const pb = document.getElementById('progressbar');
            if (pb) { pb.setAttribute('aria-valuenow', String(Math.round(progress))); pb.setAttribute('aria-valuetext', `${currentQuestion + 1} of ${quizData.length}`); }
            document.getElementById('current-question').textContent = currentQuestion + 1;
            document.getElementById('prev-btn').disabled = currentQuestion === 0;
        }
        function updateScore() {
            document.getElementById('current-score').textContent = score;
            const percentage = Math.round((score / quizData.length) * 100);
            document.getElementById('percentage').textContent = percentage + '%';
        }
        function finishQuiz() {
            document.querySelector('.quiz-container').style.display = 'none';
            document.getElementById('results').classList.add('show');
            document.getElementById('final-score').textContent = score;
            document.getElementById('final-total').textContent = quizData.length;
            const percentage = (score / quizData.length) * 100; let message = '';
            if (percentage >= 90) message = 'üåü Outstanding! You have excellent knowledge!';
            else if (percentage >= 75) message = 'üëè Great job! You did very well!';
            else if (percentage >= 60) message = 'üìö Good effort! Keep practicing!';
            else message = 'üí™ Keep studying! You can do better!';
            document.getElementById('result-message').textContent = message;
        }
        function restartQuiz() {
            // Reselect the same unit and restore controls
            const activeBtn = Array.from(document.querySelectorAll('.unit-btn')).find(b => b.classList.contains('active')) || null;
            selectUnit(currentUnit, activeBtn);
        }
        // Keyboard shortcuts for better usability
        document.addEventListener('keydown', (e) => {
            const resultsVisible = document.getElementById('results').classList.contains('show');
            if (resultsVisible) return;
            if (e.key === 'Enter') {
                if (!answered) checkAnswer();
                else if (currentQuestion < quizData.length - 1) nextQuestion();
                else finishQuiz();
            } else if (e.key === 'ArrowRight') {
                if (answered && currentQuestion < quizData.length - 1) nextQuestion();
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            }
        });
    </script>
</body>
</html>
